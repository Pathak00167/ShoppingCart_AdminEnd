<div class="p-8 bg-gray-100 min-h-screen">
  <!-- Page Header -->
  <div class="flex flex-col md:flex-row justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-gray-800">Vendor - Product Listing</h1>
    <div class="mt-4 md:mt-0 flex flex-wrap gap-3">
    <button (click)="openAddProductModal()"
        class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition text-sm">
  + Add New Product
</button>

<button class="bg-emerald-600 text-white px-4 py-2 rounded hover:bg-emerald-700 transition text-sm">
  + Request SubCategory
</button>

    </div>
  </div>

  <!-- Filters (optional for categories/subcategories) -->
  <div class="bg-white rounded-lg shadow-sm p-4 mb-6 flex flex-col md:flex-row gap-4">
    <select class="border border-gray-300 px-3 py-2 rounded text-sm w-full md:w-1/3">
      <option value="">All Categories</option>
      <!-- Dynamically populate -->
     
    </select>

    <select class="border border-gray-300 px-3 py-2 rounded text-sm w-full md:w-1/3">
      <option value="">All Subcategories</option>
      <!-- Dynamically populate -->
    
    </select>

    <input type="text" placeholder="Search Products..." class="border border-gray-300 px-3 py-2 rounded text-sm w-full md:w-1/3" />
  </div>

  <!-- Product Cards Grid -->
 <!-- Product Cards Grid -->
<div class="p-6 bg-gray-100 min-h-screen">
  <h1 class="text-2xl font-bold text-gray-800 mb-6">My Products</h1>

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    <div *ngFor="let product of products" class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition">
      <img src="/images/instruct.svg" alt="Product Image" class="w-full h-48 object-cover">

      <div class="p-4 flex flex-col justify-between h-[270px]">
        <div>
          <h2 class="text-lg font-semibold text-gray-800 truncate">{{ product.name }}</h2>
          <p class="text-sm text-gray-500 mb-1">{{ product.category }}</p>
          <p class="text-green-600 font-bold text-xl mb-1">â‚¹{{ product.price }}</p>
          <p class="text-sm text-gray-600 mb-2 line-clamp-2">{{ product.description }}</p>

          <p class="text-sm font-medium"
             [ngClass]="product.inStock ? 'text-green-500' : 'text-red-500'">
            {{ product.inStock ? 'In Stock' : 'Out of Stock' }}
          </p>

          <!-- View More Button -->
          <button (click)="openProductDetails(product)" class="text-indigo-600 text-sm underline mt-2 w-full text-left">
            View More
          </button>
        </div>

        <div class="mt-4 flex justify-between gap-2">
          <button class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 text-sm w-full">
            Edit
          </button>
          <button class="bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 text-sm w-full">
            Delete
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Product Details Modal -->
<div *ngIf="selectedProduct" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white w-[90vw] max-w-lg rounded-xl shadow-xl p-6 relative">
    <!-- Close Button -->
    <button (click)="closeProductDetails()" class="absolute top-3 right-4 text-2xl text-gray-600 hover:text-black">
      &times;
    </button>

    <!-- Product Image -->
    <img src="/images/instruct.svg" class="w-full h-52 object-cover rounded mb-4" alt="Product Image" />

    <!-- Product Info -->
    <h2 class="text-xl font-bold text-gray-800 mb-2">{{ selectedProduct.name }}</h2>
    <p class="text-sm text-gray-500 mb-2">Category: {{ selectedProduct.category }}</p>
    <p class="text-lg text-green-600 font-semibold mb-2">â‚¹{{ selectedProduct.price }}</p>
    <p class="text-gray-700 text-sm mb-3">{{ selectedProduct.description }}</p>
    <p class="text-sm font-medium mb-2"
       [ngClass]="selectedProduct.inStock ? 'text-green-500' : 'text-red-500'">
      {{ selectedProduct.inStock ? 'In Stock' : 'Out of Stock' }}
    </p>

    <!-- Optional Info -->
    <p *ngIf="selectedProduct.sku" class="text-xs text-gray-400">SKU: {{ selectedProduct.sku }}</p>
    <p *ngIf="selectedProduct.variants?.length" class="text-xs text-gray-400">Variants: {{ selectedProduct.variants.length }}</p>
  </div>
</div>


</div>

<!-- Add Product Modal -->
<!-- Add Product Modal -->
<div *ngIf="showAddProductModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm">
  <div class="bg-white w-[95vw] max-w-4xl rounded-xl shadow-2xl p-6 relative max-h-[90vh] overflow-y-auto">
    <!-- Close Button -->
    <button (click)="closeAddProductModal()" class="absolute top-4 right-4 text-2xl text-gray-500 hover:text-gray-700 transition">
      &times;
    </button>

    <div class="flex items-center gap-3 mb-6">
      <div class="bg-blue-100 p-2 rounded-full">
        <span class="text-blue-600 text-xl">ğŸ“¦</span>
      </div>
      <h2 class="text-2xl font-bold text-gray-800">Add New Product</h2>
    </div>

    <!-- Progress Steps -->
    <div class="mb-8">
      <div class="flex items-center justify-between relative">
        <div class="absolute top-1/2 left-0 right-0 h-1 bg-gray-200 -translate-y-1/2 z-0"></div>
        
        <!-- Step 1 Indicator -->
        <div class="flex flex-col items-center z-10">
          <div [class]="currentStep >= 1 ? 'bg-blue-600 text-white' : 'bg-white border-2 border-gray-300'" 
               class="flex items-center justify-center w-8 h-8 rounded-full transition">
            <span>1</span>
          </div>
          <span [class]="currentStep >= 1 ? 'text-blue-600 font-medium' : 'text-gray-600'" 
                class="text-xs mt-1">Basic Info</span>
        </div>
        
        <!-- Step 2 Indicator -->
        <div class="flex flex-col items-center z-10">
          <div [class]="currentStep >= 2 ? 'bg-blue-600 text-white' : 'bg-white border-2 border-gray-300'" 
               class="flex items-center justify-center w-8 h-8 rounded-full transition">
            <span>2</span>
          </div>
          <span [class]="currentStep >= 2 ? 'text-blue-600 font-medium' : 'text-gray-600'" 
                class="text-xs mt-1">Variants</span>
        </div>
        
        <!-- Step 3 Indicator -->
        <div class="flex flex-col items-center z-10">
          <div [class]="currentStep >= 3 ? 'bg-blue-600 text-white' : 'bg-white border-2 border-gray-300'" 
               class="flex items-center justify-center w-8 h-8 rounded-full transition">
            <span>3</span>
          </div>
          <span [class]="currentStep >= 3 ? 'text-blue-600 font-medium' : 'text-gray-600'" 
                class="text-xs mt-1">Review</span>
        </div>
      </div>
    </div>

    <form [formGroup]="productForm" (ngSubmit)="submitProduct()" class="space-y-6">
      <!-- Step 1: Basic Information -->
      <div *ngIf="currentStep === 1" class="bg-blue-50/50 p-5 rounded-xl border border-blue-100">
        <div class="flex items-center gap-2 mb-4">
          <span class="text-blue-500">ğŸ“</span>
          <h3 class="text-lg font-semibold text-gray-700">Basic Information</h3>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
      <!-- Category Selection -->
<div>
  <label class="text-sm font-medium text-gray-700 mb-2 flex items-center gap-1">
    <span>ğŸ“‚</span> Category
    <span class="text-xs text-gray-500 ml-auto">(Required)</span>
  </label>
  <select formControlName="CategoryId" (change)="onCategoryChange($event)" 
          class="w-full border border-gray-200 rounded-lg px-4 py-2.5 bg-white focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition">
    <option value="">Select Category</option>
    <!-- Static options -->
    <option value="1">ğŸ“± Electronics</option>
    <option value="2">ğŸ‘• Fashion</option>
    <option value="3">ğŸ  Home & Kitchen</option>
    <!-- Dynamic options from API -->
    <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
  </select>
  <div *ngIf="productForm.get('CategoryId')?.touched && productForm.get('CategoryId')?.errors?.['required']" 
       class="text-red-500 text-xs mt-1 flex items-center gap-1">
    <span>âš ï¸</span> Please select a category
  </div>
</div>

<!-- Subcategory Selection -->
<div>
  <label class="text-sm font-medium text-gray-700 mb-2 flex items-center gap-1">
    <span>ğŸ“‚</span> Subcategory
    <span class="text-xs text-gray-500 ml-auto">(Required)</span>
  </label>
  <select formControlName="subCategoryId" 
          class="w-full border border-gray-200 rounded-lg px-4 py-2.5 bg-white focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition">
    <option value="">Select Subcategory</option>
    <!-- Static options -->
    <option value="101">ğŸ“± Smartphones</option>
    <option value="102">ğŸ’» Laptops</option>
    <option value="201">ğŸ‘• T-Shirts</option>
    <option value="202">ğŸ‘– Jeans</option>
    <option value="301">ğŸ³ Kitchenware</option>
    <option value="302">ğŸ›‹ï¸ Furniture</option>
    <!-- Dynamic options from API -->
    <option *ngFor="let subcat of subcategories" [value]="subcat.id">{{subcat.name}}</option>
  </select>
  <div *ngIf="productForm.get('subCategoryId')?.touched && productForm.get('subCategoryId')?.errors?.['required']" 
       class="text-red-500 text-xs mt-1 flex items-center gap-1">
    <span>âš ï¸</span> Please select a subcategory
  </div>
</div>

          <!-- Brand Input -->
          <div>
            <label class="text-sm font-medium text-gray-700 mb-2 flex items-center gap-1">
              <span>ğŸ·ï¸</span> Brand
              <span class="text-xs text-gray-500 ml-auto">(Required)</span>
            </label>
            <input type="text" formControlName="brand" placeholder="e.g. Apple, Nike, Samsung" 
                   class="w-full border border-gray-200 rounded-lg px-4 py-2.5 bg-white focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition">
            <div *ngIf="productForm.get('brand')?.touched && productForm.get('brand')?.errors?.['required']" class="text-red-500 text-xs mt-1 flex items-center gap-1">
              <span>âš ï¸</span> Brand name is required
            </div>
          </div>

          <!-- Product Name -->
          <div>
            <label class="text-sm font-medium text-gray-700 mb-2 flex items-center gap-1">
              <span>ğŸ›ï¸</span> Product Name
              <span class="text-xs text-gray-500 ml-auto">(Required)</span>
            </label>
            <input type="text" formControlName="productName" placeholder="e.g. iPhone 15 Pro Max, Cotton T-Shirt" 
                   class="w-full border border-gray-200 rounded-lg px-4 py-2.5 bg-white focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition">
            <div class="text-xs text-gray-500 mt-1 flex items-center gap-1">
              <span>ğŸ’¡</span> Be descriptive but concise (50-60 characters)
            </div>
            <div *ngIf="productForm.get('productName')?.touched && productForm.get('productName')?.errors?.['required']" class="text-red-500 text-xs mt-1 flex items-center gap-1">
              <span>âš ï¸</span> Product name is required
            </div>
          </div>

          <!-- Thumbnail Image -->
          <div class="md:col-span-2">
            <label class="text-sm font-medium text-gray-700 mb-2 flex items-center gap-1">
              <span>ğŸ–¼ï¸</span> Main Product Image
              <span class="text-xs text-gray-500 ml-auto">(Required)</span>
            </label>
            <div class="relative">
              <input type="file" (change)="onFileSelected($event, 'thumbnail')" accept="image/*" 
                     class="w-full opacity-0 absolute z-10 h-full cursor-pointer">
              <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center bg-gray-50 hover:bg-gray-100 transition">
                <div class="flex flex-col items-center justify-center gap-2">
                  <span class="text-gray-400 text-2xl">ğŸ“¤</span>
                  <p class="text-sm text-gray-600">Click to upload product thumbnail</p>
                  <p class="text-xs text-gray-400">Recommended: 800x800px, PNG/JPG (Max 2MB)</p>
                </div>
              </div>
            </div>
            <div *ngIf="thumbnailPreview" class="mt-3 flex items-center gap-3">
              <img [src]="thumbnailPreview" class="w-16 h-16 object-cover rounded border">
              <button type="button" (click)="removeThumbnail()" class="text-red-500 hover:text-red-700 text-sm flex items-center gap-1">
                <span>ğŸ—‘ï¸</span> Remove
              </button>
            </div>
            <div *ngIf="productForm.get('thumbnailImage')?.touched && productForm.get('thumbnailImage')?.errors?.['required']" class="text-red-500 text-xs mt-1 flex items-center gap-1">
              <span>âš ï¸</span> Main product image is required
            </div>
          </div>
        </div>

        <!-- Description -->
        <div class="mt-5">
          <label class="text-sm font-medium text-gray-700 mb-2 flex items-center gap-1">
            <span>ğŸ“„</span> Description
            <span class="text-xs text-gray-500 ml-auto">(Required)</span>
          </label>
          <textarea formControlName="description" rows="4" placeholder="Describe your product in detail. Include key features, materials, and benefits..." 
                    class="w-full border border-gray-200 rounded-lg px-4 py-2.5 bg-white focus:ring-2 focus:ring-blue-200 focus:border-blue-500 transition"></textarea>
          <div class="text-xs text-gray-500 mt-1 flex items-center gap-1">
            <span>ğŸ’¡</span> Minimum 100 characters. Include bullet points for better readability.
          </div>
          <div *ngIf="productForm.get('description')?.touched && productForm.get('description')?.errors?.['required']" class="text-red-500 text-xs mt-1 flex items-center gap-1">
            <span>âš ï¸</span> Description is required
          </div>
        </div>
      </div>

      <!-- Step 2: Variants -->
      <div *ngIf="currentStep === 2" class="bg-purple-50/50 p-5 rounded-xl border border-purple-100">
        <!-- ... (keep your existing variants form fields) ... -->
      </div>

      <!-- Step 3: Review -->
      <div *ngIf="currentStep === 3" class="bg-green-50/50 p-5 rounded-xl border border-green-100">
        <!-- ... (keep your existing review section) ... -->
      </div>

      <!-- Form Navigation -->
      <div class="flex justify-between items-center pt-4 border-t border-gray-200">
        <div>
          <button *ngIf="currentStep > 1" type="button" (click)="prevStep()" 
                  class="px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition flex items-center gap-2">
            <span>â†</span> Previous
          </button>
          <button *ngIf="currentStep === 1" type="button" (click)="closeAddProductModal()" 
                  class="px-5 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition flex items-center gap-2">
            <span>âœ–ï¸</span> Cancel
          </button>
        </div>
        
        <div class="flex items-center gap-3">
          <button *ngIf="currentStep < 3" type="button" (click)="nextStep()" 
                  [disabled]="!isStepValid(currentStep)"
                  class="px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-70">
            <span>â†’</span> Next
          </button>
          <button *ngIf="currentStep === 3" type="submit" 
                  class="px-5 py-2.5 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition shadow-md flex items-center gap-2">
            <span>ğŸš€</span> Publish Product
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
